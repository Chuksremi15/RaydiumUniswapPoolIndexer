# Real-Time and Historical Pool Price & Transaction Update Table for Raydium and Uniswap

### Overview

This project utilizes a quick node stream to track mint/swap on Raydium and the Uniswap pool. The project flow involves getting this stream from Quicknode, doing some data filtering, sending the stream to our Nodejs backend via webhook, doing some more filtering, and storing it in a postGreSQL database. It also involves creating API routes, calling these routes, and displaying data from and on a React frontend.

### Requirement

Node.js (v18 or later) and npm installed
TypeScript (latest version) and ts-node installed
Ngrok for exposing your local server publicly
PostgreSQL
React

### Get started

### Backend

1. Folk this repo, cd into the backend folder, and run the command

```
npm install
```

2. Start and connect to an instance of your PostgreSQL database by replacing the environmental variables in .evn, refer to .evn.example for values, and run the command

```
npm run dev
```

You should see the logs below on your terminal

```
Server running on http://localhost:3000
Connected to PostgreSQL!
```

Proceed to create a transaction table by entering the command in your postgre terminal.

```
 CREATE TABLE transactions (
 id SERIAL PRIMARY KEY,
 transaction_type VARCHAR(10),
 time_created BIGINT,
 base_token_addr TEXT[],
 token_addr VARCHAR(100),
 base_token_change NUMERIC,
 token_change NUMERIC,
 owner VARCHAR(100)
);
```

We will be using this table to store filtered streams from Quick Node.

3. Set up ngrok to expose your local host to the web, This step is neccesary to receive quick node stream to your backend.

### Streams

1. Create an account on quick node and navigate to the stream section, create a stream for Solana Mainnet, select Block as data set. Replace the code in the editor provided to filter stream with the code in the file below. [QuickNode stream documentation](https://www.quicknode.com/docs/streams/getting-started).

```
backend/raydium/raydiumSwapStreamFilter.js
```

2. Replace your Destination URL with with the url generated by ngrok. It should look something like

```
{yourngrokurl}/raydium/webhook
```

3. Click on test destination, if you get a transaction logged on your local terminal, your setup is correct.

4. Activate streaming

### Frontend

1. Cd into the frontend folder and run the command

```
npm install
```

2. Start your React app by running

```
npm run dev
```
